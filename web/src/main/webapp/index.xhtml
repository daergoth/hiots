<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:p="http://primefaces.org/ui" template="/template/base.xhtml">
	<ui:define name="content">
	
		<h:form id="form">		
			
	        <p:layout id="dashboard" style="height: 500px;">
			    <p:layoutUnit position="east" resizable="false" size="20%" >
			        <p:menu style="width: 99%;">
			        	<p:submenu label="New">			        	
				        	<p:menuitem id="newTempWidget" value="Temperature widget" onclick="PF('newTempOverlay').show('#{component.clientId}');" icon="fa fa-plus"/>
				        	
			        	</p:submenu>
			        </p:menu>
			        <p:overlayPanel widgetVar="newTempOverlay" my="right top" at="right bottom">
		        		<ui:repeat var="sensor" value="#{indexManager.tempSensors}">
		        			<p:commandButton value="#{sensor.name}" actionListener="#{indexManager.newTemperatureWidget(sensor.id)}" update=":form:dashboard"/>
		        		</ui:repeat>
		        	</p:overlayPanel>
			    </p:layoutUnit>
			 
			    <p:layoutUnit position="center" size="80%">
			        <p:dashboard id="board" binding="#{indexManager.dashboard}" />
			        <div style="clear:both" />
			    </p:layoutUnit>
			</p:layout>
			
			<p:poll interval="5" update="dashboard" listener="#{indexManager.refresh}" />
		</h:form>

	</ui:define>
</ui:composition>
